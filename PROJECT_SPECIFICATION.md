# Спецификация проекта: Система для изучения английского языка

## Обзор проекта
Данное приложение представляет собой интерактивную платформу для изучения английского языка, ориентированную на русскоговорящих пользователей. Система построена на современном технологическом стеке и использует интеллектуальные алгоритмы для персонализации обучения.

## Целевая аудитория
- Русскоговорящие пользователи, желающие изучать английский язык
- Начинающие и продвинутые ученики (уровни от A0 до C1+ по шкале CEFR)
- Индивидуальные пользователи, занимающиеся самостоятельно

## Ключевые ценности продукта
- **Эффективное обучение**: Система интервального повторения обеспечивает долгосрочное запоминание
- **Персонализация**: Контент адаптируется под уровень и прогресс ученика
- **Простота использования**: Минималистичный интерфейс с фокусом на практику
- **Практический подход**: Обучение через активный перевод предложений
- **Подробная обратная связь**: Анализ переводов с рекомендациями на русском языке

## Бизнес-логика и основные сущности для непрограммистов

### Ключевые сущности системы

#### Пользователь
Пользователь — это человек, который учится в системе.
- **Главные характеристики**: 
  - Электронная почта для входа
  - Пароль (хранится в безопасном виде)
  - Имя пользователя (для отображения) 
  - Уровень владения языком (A0, A1, A2, B1, B2, C1+)
  - Ежедневная цель (количество упражнений в день)
  - Роль (обычный пользователь, модератор, администратор)
- **Пример**: Мария — новый пользователь уровня A2, с ежедневной целью в 10 упражнений

#### Слово
Слово — это языковая единица, которую нужно выучить.
- **Главные характеристики**:
  - Само слово на английском
  - Перевод на русский
  - Часть речи (существительное, глагол, прилагательное и т.д.)
  - Уровень сложности (от A0 до C1+)
- **Пример**: "dog" — существительное уровня A1, перевод "собака"

#### Грамматическая тема
Грамматическая тема — это аспект грамматики английского языка.
- **Главные характеристики**:
  - Название темы
  - Описание и правила
  - Категория (например, времена глагола, модальные глаголы, существительные)
  - Уровень сложности (от A0 до C1+)
- **Пример**: "Present Simple" — тема для начинающих, категория "Глаголы и времена"

#### Предложение
Предложение — это практический пример с контекстом для изучения слов и грамматики.
- **Главные характеристики**:
  - Текст предложения на английском
  - Перевод на русский
  - Связанное слово (которое нужно выучить)
  - Связанная грамматическая тема (которая иллюстрируется)
  - Уровень сложности (от A0 до C1+)
- **Пример**: "I walk my dog every morning" — предложение уровня А2 для слова "dog" и грамматической темы "Present Simple"

#### Упражнение
Упражнение — это задание, которое выполняет пользователь.
- **Главные характеристики**:
  - Связь с пользователем (кто выполняет)
  - Связь с предложением (что переводится)
  - Перевод, предложенный пользователем
  - Оценка правильности (общая, для слова, для грамматики)
  - Связь с сессией (в рамках какого занятия)
- **Пример**: Мария перевела "I walk my dog every morning" как "Я выгуливаю свою собаку каждое утро" и получила оценку "правильно"

#### Сессия упражнений
Сессия — это одно занятие пользователя, объединяющее несколько упражнений.
- **Главные характеристики**:
  - Связь с пользователем (кто занимался)
  - Время начала и окончания
  - Общее количество упражнений
  - Количество правильных и неправильных ответов
- **Пример**: Мария выполнила сессию из 10 упражнений, в которой правильно ответила на 8 вопросов

### Как работает процесс обучения

1. **Регистрация и определение уровня**
   - Пользователь регистрируется и определяет свой начальный уровень владения языком
   - Система настраивает контент под нужный уровень сложности

2. **Ежедневные занятия**
   - Пользователь получает подборку предложений для перевода, соответствующих его уровню
   - Каждое предложение содержит целевое слово и иллюстрирует определенную грамматическую тему
   - Предложения отбираются с учетом того, какие слова и грамматические темы нуждаются в повторении

3. **Выполнение упражнений**
   - Пользователь видит предложение на английском и должен перевести его на русский
   - После отправки перевода система анализирует ответ:
     * Правильно ли использовано целевое слово
     * Правильно ли применена грамматическая тема
     * Насколько точен и естественен перевод в целом

4. **Обратная связь и оценка**
   - Пользователь получает детальную обратную связь о своем переводе
   - Система отмечает успехи и ошибки
   - При необходимости даются подсказки и объяснения на русском языке

5. **Интервальное повторение**
   - Система отслеживает, какие слова и темы пользователь усвоил хорошо, а где есть трудности
   - На основе этой информации планируется, когда в следующий раз нужно повторить каждое слово или тему
   - Хорошо усвоенные элементы повторяются реже, проблемные — чаще
   - Для каждого слова и темы рассчитывается показатель владения (mastery) от 0 до 1

6. **Отслеживание прогресса**
   - Пользователь видит свой прогресс по количеству изученных слов и тем
   - Система отслеживает серии дней (streaks) непрерывного обучения
   - Пользователь может видеть статистику успешности своих ответов

### Дополнительные особенности бизнес-логики

#### Адаптивный подбор контента
- Система учитывает не только уровень пользователя, но и его индивидуальные трудности
- Если пользователь хорошо справляется с текущим уровнем, система может предложить более сложные задания
- Если есть трудности, система увеличивает частоту повторения проблемных тем

#### Механика интервального повторения
- Новые слова и темы появляются в упражнениях часто
- После каждого правильного ответа интервал до следующего повторения увеличивается
- После неправильного ответа интервал сокращается
- Формула расчета интервала учитывает историю ответов по каждому элементу

#### Расчет показателя владения (mastery)
- Начальное значение для нового слова или темы — 0
- После каждого правильного ответа показатель увеличивается
- После каждого неправильного ответа показатель уменьшается
- Максимальное значение — 1 (полное владение)
- Слова и темы с низким показателем появляются в упражнениях чаще

#### Роли пользователей и их возможности
- **Обычный пользователь**: выполняет упражнения, видит свой прогресс
- **Модератор**: может добавлять и редактировать учебный контент (слова, темы, предложения)
- **Администратор**: имеет полный доступ ко всем функциям, включая управление пользователями

## Технологическая база
- **Бэкенд**: NestJS с PostgreSQL и Prisma ORM
- **Фронтенд**: Vue 3 с TypeScript, Vite и PrimeVue UI
- **Интеграция ИИ**: Интеграция с Gemini API через OpenAI-совместимый интерфейс
- **Инфраструктура**: Docker, Docker Compose для контейнеризации

## Функциональность MVP

### Основной процесс обучения
1. Пользователь получает предложение на английском для перевода на русский
2. Система анализирует перевод на нескольких уровнях:
   - Правильность использования ключевого слова
   - Корректное применение грамматической темы
   - Общая точность и естественность перевода
3. Пользователь получает подробную обратную связь на русском языке
4. Система планирует повторение материала на основе результатов интервального повторения

### Учет прогресса пользователя
- Отслеживание освоения словарного запаса с показателем владения (mastery)
- Мониторинг прогресса по грамматическим темам
- Адаптивный выбор сложности материала
- Серия дней обучения (streak) и ежедневные цели

### Административные функции
- Управление пользователями (создание, редактирование, удаление)
- Модерация и добавление учебного контента
- Роли пользователей: USER, MODERATOR, ADMIN
- Мониторинг использования системы

## Модели данных

### Основные сущности
- **Пользователи (User)**: Профили учащихся с учетными данными, уровнем CEFR и настройками
- **Слова (Word)**: Словарный запас с переводами, частями речи и примерами
- **Грамматические темы (GrammarTopic)**: Структурированные правила с категориями и уровнями сложности
- **Предложения (Sentence)**: Практические примеры с ключевыми словами и грамматикой
- **Упражнения (Exercise)**: Выполненные пользователем упражнения с оценкой правильности
- **Сессии упражнений (ExerciseSession)**: Группировка упражнений в рамках одного занятия

### Прогресс обучения
- **Прогресс по словам (UserWordProgress)**: Отслеживание изученных слов с применением интервального повторения
- **Прогресс по грамматике (UserGrammarTopicProgress)**: Мониторинг освоения грамматических тем
- **Прогресс по упражнениям**: История переводов с оценкой правильности
- **Сессии обучения**: Отслеживание активности пользователя

## Пользовательский путь

### Регистрация и настройка
1. Регистрация с email и паролем
2. Определение начального уровня владения языком (CEFR)
3. Установка ежедневных целей обучения

### Ежедневное использование
1. Получение адаптированных упражнений на перевод
2. Отправка переводов и получение обратной связи
3. Отслеживание дневного прогресса и серии дней
4. Доступ к личной статистике и аналитике

## API и интеграции

### Основные API-эндпоинты
- Аутентификация и управление пользователями с использованием JWT
- Получение и проверка упражнений
- Доступ к статистике и прогрессу
- Управление учебным контентом

### Внешние интеграции
- Gemini API через OpenAI-совместимый интерфейс для анализа переводов и генерации контента

## Безопасность и соответствие требованиям
- Защищенная аутентификация через JWT
- Хеширование паролей с использованием bcrypt
- Защита от основных уязвимостей веб-приложений
- Разграничение доступа на основе ролей

## Расширения для будущих версий

### Расширение учебного опыта
- Различные форматы упражнений (множественный выбор, заполнение пропусков)
- Тематические категории для контекстного обучения
- Персонализированные учебные пути на основе интересов

### Геймификация и мотивация
- Система достижений и наград
- Виртуальная валюта и поощрения
- Еженедельные вызовы и цели для поддержания вовлеченности

### Социальные элементы
- Лидерборды по различным категориям
- Добавление друзей и отслеживание их прогресса
- Групповые вызовы и соревнования

### Аналитика для пользователей
- Визуализация прогресса по темам и уровням
- Идентификация слабых мест и рекомендации
- Прогнозирование готовности к повышению уровня CEFR

## Метрики успеха
- Удержание пользователей (DAU, WAU, MAU)
- Средняя продолжительность сессии
- Непрерывность обучения (длина серий)
- Прогресс пользователей по уровням CEFR
- Количество выполненных упражнений

## График реализации
1. **Фаза 1 (MVP)**: Базовая функциональность перевода предложений и система интервального повторения
2. **Фаза 2**: Расширенная аналитика и геймификация
3. **Фаза 3**: Социальные функции и дополнительные форматы упражнений
4. **Фаза 4**: Расширенные интеграции и улучшенный ИИ-анализ

## Команда проекта
- Руководитель проекта
- Бэкенд-разработчики (NestJS, TypeScript)
- Фронтенд-разработчики (Vue, TypeScript)
- Специалист по UX/UI
- Лингвист (методолог)
- QA-инженеры

## Риски и их снижение
- **Стоимость AI API**: Оптимизация запросов, кэширование, лимиты
- **Качество обратной связи**: Тщательное тестирование промптов, регулярные улучшения
- **Удержание пользователей**: Геймификация, уведомления, качественный контент
- **Масштабирование**: Модульная архитектура, горизонтальное масштабирование

## Заключение
Данный проект представляет инновационный подход к изучению английского языка через активную практику и интеллектуальный анализ. Система предлагает эффективный способ обучения с использованием современных технологий и методик, обеспечивая персонализированный опыт для каждого пользователя. 